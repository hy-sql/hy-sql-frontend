<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description"
          content="Web site created using create-react-app" />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>React App</title>
</head>
<body>

    <noscript>You need to enable JavaScript to run this app.</noscript>

    <div id="root"></div>
    <p>Enter your SQL statement in the field, then click "Submit" to submit the form:</p>

    <form id="form1" method="post" name="queryForm">
        <textarea name="query[]" rows="10" cols="30" id="box"></textarea>
        <input type="button" value="Submit" id="button">
    </form>

    <!-- Returns 200 Success and receives resultArray from a Heroku backend.   -->
    
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script type="text/javascript">
        let button = document.getElementById("button")
        button.onclick = submitform
        async function submitform() {
            const baseUrl = '/api/query'            
            var input = document.getElementById('box')
            var array = []
            array.push(input.value)
            var commandArray = { commandArray: array }
            //Needs to receive env-parameters?
            var res = await axios.post(`https://hy-sql.herokuapp.com${baseUrl}`, commandArray, {
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            console.log(res)
        }
    </script>


</body>
</html>
